import{r as w,z as y,a as j,j as n,o as M}from"./index-CqXAftxc.js";const N=()=>{const e=w.useMemo(()=>new y,[]).getUserId(),o=async()=>{if(!e)return{};const s=localStorage.getItem("users-data");if(!s)return{};try{return JSON.parse(s)[e]?.messages||{}}catch(r){return console.error("Failed to parse messages from localStorage:",r),{}}};return{getAllMessages:o,getMessagesById:async s=>(await o())[s]||[],saveMessage:async(s,r)=>{if(!e){console.error("Cannot save message: user not authenticated");return}const t=localStorage.getItem("users-data"),a=t?JSON.parse(t):{};a[e]||(a[e]={messages:{},favorites:{},createdOrders:{}}),a[e].messages||(a[e].messages={});const i=a[e].messages[s]||[];a[e].messages[s]=[...i,r],localStorage.setItem("users-data",JSON.stringify(a))},resetMessages:async s=>{if(!e)return;const r=localStorage.getItem("users-data"),t=r?JSON.parse(r):{};t[e]?.messages?.[s]&&(delete t[e].messages[s],localStorage.setItem("users-data",JSON.stringify(t)))}}},I=p=>{const e=j.c(21),{message:o,currentUser:l,ownUserId:h}=p,c=o.senderId===h,s=`flex ${c?"justify-end":"justify-start"}`,r=`flex gap-2 max-w-[75%] ${c?"flex-row-reverse":"flex-row"}`;let t;e[0]!==l||e[1]!==c?(t=!c&&n.jsx(n.Fragment,{children:l.picture?n.jsx(M,{to:`/profile/${l.id}`,children:n.jsx("img",{src:l.picture.medium,alt:l.name,className:"w-8 h-8 rounded-full flex-shrink-0 mt-1"})}):n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-4xl font-bold",children:l.name?.charAt(0).toUpperCase()||"U"})}),e[0]=l,e[1]=c,e[2]=t):t=e[2];const a=`px-4 py-2.5 rounded-2xl ${c?"bg-gradient-to-r from-indigo-600 to-indigo-500 text-white rounded-br-sm shadow-md":"bg-white border border-gray-200 text-gray-900 rounded-bl-sm shadow-sm"}`;let i;e[3]!==o.text?(i=n.jsx("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap break-words",children:o.text}),e[3]=o.text,e[4]=i):i=e[4];let g;e[5]!==a||e[6]!==i?(g=n.jsx("div",{className:a,children:i}),e[5]=a,e[6]=i,e[7]=g):g=e[7];const f=`text-xs mt-1 px-1 ${c?"text-right text-gray-500":"text-left text-gray-500"}`;let d;e[8]!==o.timestamp||e[9]!==f?(d=n.jsx("p",{className:f,children:o.timestamp}),e[8]=o.timestamp,e[9]=f,e[10]=d):d=e[10];let m;e[11]!==g||e[12]!==d?(m=n.jsxs("div",{children:[g,d]}),e[11]=g,e[12]=d,e[13]=m):m=e[13];let x;e[14]!==r||e[15]!==t||e[16]!==m?(x=n.jsxs("div",{className:r,children:[t,m]}),e[14]=r,e[15]=t,e[16]=m,e[17]=x):x=e[17];let u;return e[18]!==s||e[19]!==x?(u=n.jsx("div",{className:s,children:x}),e[18]=s,e[19]=x,e[20]=u):u=e[20],u};export{I,N as u};
